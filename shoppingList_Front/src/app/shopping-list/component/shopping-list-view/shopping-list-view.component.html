<mat-card>
  <!-- In "Edit mode", Add a category -->
  <mat-expansion-panel *ngIf="editMode$|async" hideToggle>

    <!-- TODO - Use 'accent' color from Material SASS Theme -->
    <mat-expansion-panel-header #panelH (click)="panelH._toggle()" style='background-color:cornflowerblue'>
      <mat-panel-title>Add Category</mat-panel-title>
      <mat-icon>add_circle</mat-icon>
    </mat-expansion-panel-header>
  </mat-expansion-panel>

  <!-- Shopping List -->
  <div *ngIf="myShoppingList[0] && myShoppingList[0].catProducts">

    <mat-accordion [multi]=true #accordion="matAccordion">

      <mat-expansion-panel *ngFor="let catProd of myShoppingList[0].catProducts" hideToggle>

        <!-- Header containing the product category -->
        <mat-expansion-panel-header>
          <mat-panel-title>{{catProd.category}}</mat-panel-title>
          <mat-icon *ngIf="editMode$|async">delete</mat-icon>
        </mat-expansion-panel-header>

        <!-- Expanded Panel containing the product sub category and their products -->
        <li *ngFor="let subCatProd of catProd.subCatProducts">
          <span> {{subCatProd.subCategory}} : </span>
          <mat-chip-list multiple>
            <div *ngFor="let prod of subCatProd.products">
              <mat-chip (click)="swapProductBoughtStatus(prod)" [selected]="prod.bought">
                {{prod.name}}
                <mat-icon matChipRemove *ngIf="editMode$|async" (click)="deleteProduct(prod)">cancel</mat-icon>
              </mat-chip>
            </div>
          </mat-chip-list>
        </li>
      </mat-expansion-panel>

    </mat-accordion>

  </div>
</mat-card>